<ion-header>
  <ion-toolbar class="ion-text-center">
      <ion-buttons slot="start">
      <ion-back-button defaultHref="/menu-principal" text=""></ion-back-button>
      </ion-buttons>
      <ion-title class="ion-text-uppercase">Dia Acompanhamento</ion-title>
      <ion-buttons slot="end">
      <ion-menu-button menuId="main-content"></ion-menu-button>
      </ion-buttons>
  </ion-toolbar>   
</ion-header>
<ion-content>
  <form [formGroup]="formAcompanhamentoDia">
      <ion-card>   
          <ion-card-header>
            <ion-card-title class="ion-text-center">Informações do Paciente</ion-card-title>
          </ion-card-header>        
          <ion-item>
              <ion-label>
                  Paciente:
                  <br>
                  <span [innerHTML]="acompanhamentoMedico.senhaAutorizacao.beneficiario.nomeBeneficiario"></span>
              </ion-label>                
          </ion-item>
          <ion-item>
              <ion-label>
                  Dia de Acompanhamento:
                  <br>
                  <span [innerHTML]="acompanhamentoMedicoDia.diaAcompanhamento"></span>
              </ion-label>                
          </ion-item>
      </ion-card>
      <ion-card>  
          <ion-card-header>
              <ion-card-title class="ion-text-center">Resumo do dia</ion-card-title>
          </ion-card-header>
          <ion-item>
              <ion-textarea formControlName="resumoDia" rows="5" cols="20" [readonly]="isReadOnly"></ion-textarea>               
          </ion-item>
          <ion-item mode="md" lines="none" class="item-error" *ngIf="((resumoDia.dirty || resumoDia.touched) && resumoDia.hasError('required'))">
              <ion-note color="warning" class="ion-padding-horizontal">Campo obrigatório
                  <ion-icon color="warning" class="margin-top-02em" name="alert"></ion-icon>
              </ion-note>
          </ion-item>          
      </ion-card>
      <ion-card>     
          <ion-card-header>
              <ion-card-title class="ion-text-center">Documentos</ion-card-title>
          </ion-card-header>
          <ion-row>
              <ion-col size="12" class="ion-text-center">
                <ion-button expand="block" size="large" (click)="abrirTelaAnexo()">Anexos</ion-button>  
              </ion-col>
            </ion-row>
      </ion-card>
      <ng-container *ngFor="let grupo of acompanhamentoMedico.configFormulario.listaGrupoConfigFormulario; let i = index">
          <ion-card button="true" class="stats-card">
            <ion-card-header (click)="exibirDados(i)">
              <ion-row>
                <ion-col size="10" class="ion-text-center ion-no-padding ion-no-margin">
                  <ion-card-title>{{grupo.desGrupoConfigFormulario}}</ion-card-title>
                </ion-col>
                <ion-col size="2" class="ion-text-right ion-no-margin ion-no-padding">
                  <ion-button size="small" fill="clear" class="ion-no-padding">
                    <ion-icon *ngIf="!grupo.open" slot="icon-only" name="ios-arrow-down">
                    </ion-icon>
                    <ion-icon *ngIf="grupo.open" slot="icon-only" name="ios-arrow-up">
                    </ion-icon>
                  </ion-button>
                </ion-col>
              </ion-row>
              <ion-row *ngIf="!validaCamposObrigatorios(grupo)">
                <ion-col size="12">
                    <ion-note color="warning">Campo(s) Obrigatório(s) não preenchido(s)
                        <ion-icon color="warning" class="margin-top-02em" name="alert"></ion-icon>
                    </ion-note>
                </ion-col>
              </ion-row>                
            </ion-card-header>
            <ion-card-content class="ion-padding" *ngIf="grupo.open">               
                <ion-list *ngFor="let item of grupo.listaItemGrupoConfigFormulario">
                  <ion-row>
                    <ion-col size="12" class="ion-text-left text-font-size-18">
                      <ion-label position="stacked">{{item.desItemGrupoConfigFormulario}}</ion-label>
                    </ion-col>                      
                  </ion-row>                                       
                  <div *ngFor="let dado of item.listaDadoItemGrupoConfigFormulario">
                    <dynamic-forms [dado]="dado" [form]="formAcompanhamentoDia" [statusAcompanhamento]="acompanhamentoMedico.status"></dynamic-forms>
                  </div>
                </ion-list>                    
            </ion-card-content>                     
          </ion-card>
      </ng-container>
      <ion-row>
          <ion-col size="12" class="ion-text-center">
              <ion-button expand="block" size="large" (click)="salvar()" [disabled]="acompanhamentoMedico.status === 'ENCERRADO'">Salvar</ion-button>
          </ion-col>
      </ion-row>
  </form>
</ion-content>            