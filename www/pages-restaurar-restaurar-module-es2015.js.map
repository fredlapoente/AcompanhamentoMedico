{"version":3,"sources":["./src/app/pages/restaurar/restaurar.page.html","./src/app/pages/restaurar/restaurar-routing.module.ts","./src/app/pages/restaurar/restaurar.module.ts","./src/app/pages/restaurar/restaurar.page.scss","./src/app/pages/restaurar/restaurar.page.ts"],"names":[],"mappings":"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","file":"pages-restaurar-restaurar-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\r\\n    <ion-toolbar class=\\\"ion-text-center\\\">\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n        <ion-back-button defaultHref=\\\"/menu-principal\\\" text=\\\"\\\"></ion-back-button>\\r\\n        </ion-buttons>\\r\\n        <ion-title class=\\\"ion-text-uppercase\\\">Restaurar</ion-title>\\r\\n        <ion-buttons slot=\\\"end\\\">\\r\\n        <ion-menu-button menuId=\\\"main-content\\\"></ion-menu-button>\\r\\n        </ion-buttons>\\r\\n    </ion-toolbar>   \\r\\n</ion-header>\\r\\n<ion-content>\\r\\n    <ion-spinner name=\\\"lines\\\" color=\\\"success\\\"></ion-spinner>        \\r\\n</ion-content>      \"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { RestaurarPage } from './restaurar.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: RestaurarPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class RestaurarPageRoutingModule {}","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RestaurarPageRoutingModule } from './restaurar-routing.module';\n\nimport { RestaurarPage } from './restaurar.page';\n\n@NgModule({\n    imports: [\n      CommonModule,\n      FormsModule,\n      IonicModule,\n      RestaurarPageRoutingModule,\n      ReactiveFormsModule\n    ],\n    declarations: [RestaurarPage]\n  })\n  export class RestaurarPageModule {}\n","module.exports = \"ion-spinner {\\n  width: 70px !important;\\n  height: 70px !important;\\n  position: fixed;\\n  top: 30%;\\n  left: 50%;\\n  -webkit-transform: translate(-50%, -50%);\\n          transform: translate(-50%, -50%);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcmVzdGF1cmFyL0M6XFxEZXNlblxcd29ya3NwYWNlX2FwbGljYXRpdm9cXEFwcEFjb21wYW5oYW1lbnRvTWVkaWNvL3NyY1xcYXBwXFxwYWdlc1xccmVzdGF1cmFyXFxyZXN0YXVyYXIucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9yZXN0YXVyYXIvcmVzdGF1cmFyLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLHNCQUFBO0VBQ0EsdUJBQUE7RUFDQSxlQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSx3Q0FBQTtVQUFBLGdDQUFBO0FDQ0oiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9yZXN0YXVyYXIvcmVzdGF1cmFyLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1zcGlubmVyIHtcclxuICAgIHdpZHRoOiA3MHB4ICFpbXBvcnRhbnQ7XHJcbiAgICBoZWlnaHQ6IDcwcHggIWltcG9ydGFudDtcclxuICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgIHRvcDogMzAlO1xyXG4gICAgbGVmdDogNTAlO1xyXG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XHJcbn0iLCJpb24tc3Bpbm5lciB7XG4gIHdpZHRoOiA3MHB4ICFpbXBvcnRhbnQ7XG4gIGhlaWdodDogNzBweCAhaW1wb3J0YW50O1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIHRvcDogMzAlO1xuICBsZWZ0OiA1MCU7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AlertController } from '@ionic/angular';\r\nimport * as moment from 'moment';\r\nimport { SaudiLoadingComponent } from 'src/app/components/saudi-loading/saudi-loading.component';\r\nimport { SaudiToastComponent } from 'src/app/components/saudi-toast/saudi-toast.component';\r\nimport Constantes from 'src/app/config/constantes/constantes';\r\nimport { Usuario } from 'src/app/model/Usuario.model';\r\nimport { AcompanhamentoService } from 'src/app/services/acompanhamento.service';\r\nimport { NetworkService } from 'src/app/services/network.service';\r\nimport { StorageService } from 'src/app/services/storage.service';\r\n\r\n@Component({\r\n    selector: 'app-restaurar',\r\n    templateUrl: './restaurar.page.html',\r\n    styleUrls: ['./restaurar.page.scss'],\r\n  })\r\nexport class RestaurarPage implements OnInit {\r\n\r\n    constructor(\r\n        private router: Router,\r\n        private atrCtrl: AlertController,\r\n        private networkService: NetworkService,\r\n        private toastCrl: SaudiToastComponent,\r\n        private loading: SaudiLoadingComponent,\r\n        private acompanhamentoService: AcompanhamentoService,\r\n        private storageService: StorageService,\r\n    ){}    \r\n\r\n    ngOnInit() {\r\n        moment.locale('pt-br');\r\n        this.networkService.CheckNetworkStatus()\r\n        if (this.networkService.NetworkStatus.value){\r\n          this.restaurar()\r\n        }else{\r\n          this.alertaSemConexao()\r\n        }  \r\n    }\r\n\r\n    async alertaSemConexao(){          \r\n      const alert = await this.atrCtrl.create({\r\n        header: 'Para restaurar acompanhamentos você precisa de conexão com a internet',\r\n        buttons: [\r\n          {\r\n            text: 'Ok',\r\n            role: 'ok',\r\n            handler: (blah) => {\r\n              this.router.navigateByUrl('')\r\n            }\r\n          }, \r\n        ]\r\n      });    \r\n      await alert.present();\r\n  }\r\n\r\n  async restaurar(){          \r\n      const alert = await this.atrCtrl.create({\r\n        header: 'Todos dos acompanhamentos deste dispositivo serão excluídos, incluindo de outros usuários. Deseja continuar?',\r\n        buttons: [\r\n          {\r\n            text: 'Cancelar',\r\n            role: 'cancel',\r\n            handler: (blah) => {\r\n              this.router.navigateByUrl('')\r\n            }\r\n          }, {\r\n            text: 'Confirmar',\r\n            handler: () => {\r\n                this.confirmarRestaurar()                 \r\n            }\r\n          }\r\n        ]\r\n      });    \r\n      await alert.present();\r\n  }\r\n\r\n  async confirmarRestaurar(){\r\n    let usuario: Usuario = JSON.parse(localStorage.getItem('@appAcompanhamentoMedico:dadosUsuario'))\r\n    const loading = await this.loading.presentLoading('Restaurando dados...')\r\n    await this.acompanhamentoService.restaurarFormulariosAcompanhamentos(usuario).subscribe(async (data: any) => {\r\n      usuario = data \r\n      let listaFormulariosRestaurar = usuario.listaAcompanhamentoRestaurar\r\n      usuario.listaAcompanhamentoRestaurar = []    \r\n      await this.storageService.apagarTodos(Constantes.STORAGE_ACOMPANHAMENTO_MEDICO)\r\n      for(let acomp of listaFormulariosRestaurar){\r\n        acomp.usuario = usuario\r\n        acomp.operadora = usuario.operadora\r\n        await this.storageService.adicionar(Constantes.STORAGE_ACOMPANHAMENTO_MEDICO,acomp)\r\n      }      \r\n      await this.storageService.atualizar(Constantes.STORAGE_USUARIO,usuario,\"idUsuario\")\r\n      localStorage.setItem('@appAcompanhamentoMedico:dadosUsuario',JSON.stringify(usuario))\r\n      localStorage.setItem('@appAcompanhamentoMedico:operadoraUsuario', JSON.stringify(usuario.operadora))\r\n      loading.dismiss()\r\n      this.toastCrl.successToast('Dados restaurados com sucesso!')\r\n    }, error => {\r\n      this.toastCrl.errorToast(error)\r\n      loading.dismiss()\r\n    })\r\n    this.router.navigateByUrl('')\r\n  }\r\n}"],"sourceRoot":""}